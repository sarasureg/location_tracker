<!DOCTYPE html>
<html>
<head>
    <title>Secure Check-In</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
        body { font-family: sans-serif; text-align: center; padding: 50px 20px; background-color: #f0f2f5; }
        .card { background: white; padding: 30px; border-radius: 10px; box-shadow: 0 4px 8px rgba(0,0,0,0.1); max-width: 400px; margin: auto; }
        button { background-color: #4285F4; color: white; border: none; padding: 15px 30px; font-size: 16px; border-radius: 5px; cursor: pointer; font-weight: bold; width: 100%; }
        button:disabled { background-color: #ccc; }
        p { margin-top: 15px; color: #555; }
    </style>
</head>
<body>

<div class="card">
    <h2>üìç Secure Team Check-In</h2>
    <p>Click below to verify your location and identity.</p>
    <br>
    <button onclick="getLocation()" id="btn">üöÄ Get Location & Open Form</button>
    <p id="status"></p>
</div>

<script>
    // ================= CONFIGURATION =================
    // 1. Paste the base URL of your form (everything BEFORE the '?')
    const FORM_URL = "https://docs.google.com/forms/d/e/1FAIpQLSfkcn2dwx-jDcyjWLbxuZluk9qB2M8SRl1y2m2NklkeYrHPEA/viewform";

    // 2. Paste the Entry IDs you found in Step 1
    const LAT_ENTRY_ID = "entry.1679362457";  // Replace with your Latitude ID
    const LONG_ENTRY_ID = "entry.1195079859"; // Replace with your Longitude ID
    // =================================================

    function getLocation() {
        var status = document.getElementById("status");
        var btn = document.getElementById("btn");

        status.innerHTML = "‚è≥ Acquiring GPS Satellites...";
        btn.disabled = true;

        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(redirectWithData, showError, { enableHighAccuracy: true });
        } else {
            status.innerHTML = "‚ùå Geolocation is not supported by this browser.";
        }
    }

    function redirectWithData(position) {
        var lat = position.coords.latitude;
        var long = position.coords.longitude;
        
        // Construct the Google Form URL with parameters
        var finalUrl = `${FORM_URL}?${LAT_ENTRY_ID}=${lat}&${LONG_ENTRY_ID}=${long}`;

        document.getElementById("status").innerHTML = "‚úÖ Location Found! Redirecting...";
        
        // Redirect the user to the form
        window.location.href = finalUrl;
    }

    function showError(error) {
        var status = document.getElementById("status");
        var btn = document.getElementById("btn");
        
        switch(error.code) {
            case error.PERMISSION_DENIED:
                status.innerHTML = "‚ùå User denied the request for Geolocation.";
                break;
            case error.POSITION_UNAVAILABLE:
                status.innerHTML = "‚ùå Location information is unavailable.";
                break;
            case error.TIMEOUT:
                status.innerHTML = "‚ùå The request to get user location timed out.";
                break;
            case error.UNKNOWN_ERROR:
                status.innerHTML = "‚ùå An unknown error occurred.";
                break;
        }
        btn.disabled = false;
    }
</script>

</body>
</html>

